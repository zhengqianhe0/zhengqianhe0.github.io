import{_ as n,c as s,a as i,o as t}from"./app-Bpj5Mkzv.js";const l={};function o(a,e){return t(),s("div",null,e[0]||(e[0]=[i(`<h1 id="_3433-统计用户被提及情况" tabindex="-1"><a class="header-anchor" href="#_3433-统计用户被提及情况"><span><a href="https://leetcode.cn/problems/count-mentions-per-user/" target="_blank" rel="noopener noreferrer">3433. 统计用户被提及情况</a></span></a></h1><p>给你一个整数 <code>numberOfUsers</code> 表示用户总数，另有一个大小为 <code>n x 3</code> 的数组 <code>events</code> 。</p><p>每个 <code>events[i]</code> 都属于下述两种类型之一：</p><ol><li><p>消息事件（Message Event）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">[&quot;MESSAGE&quot;, &quot;timestampi&quot;, &quot;mentions_stringi&quot;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>事件表示在 <code>timestampi</code> 时，一组用户被消息提及。</p></li><li><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">mentions_stringi</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>字符串包含下述标识符之一：</p><ul><li><code>id&lt;number&gt;</code>：其中 <code>&lt;number&gt;</code> 是一个区间 <code>[0,numberOfUsers - 1]</code> 内的整数。可以用单个空格分隔 <strong>多个</strong> id ，并且 id 可能重复。此外，这种形式可以提及离线用户。</li><li><code>ALL</code>：提及 <strong>所有</strong> 用户。</li><li><code>HERE</code>：提及所有 <strong>在线</strong> 用户。</li></ul></li></ul></li><li><p>离线事件（Offline Event）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">[&quot;OFFLINE&quot;, &quot;timestampi&quot;, &quot;idi&quot;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>事件表示用户 <code>idi</code> 在 <code>timestampi</code> 时变为离线状态 <strong>60 个单位时间</strong>。用户会在 <code>timestampi + 60</code> 时自动再次上线。</li></ul></li></ol><p>返回数组 <code>mentions</code> ，其中 <code>mentions[i]</code> 表示 id 为 <code>i</code> 的用户在所有 <code>MESSAGE</code> 事件中被提及的次数。</p><p>最初所有用户都处于在线状态，并且如果某个用户离线或者重新上线，其对应的状态变更将会在所有相同时间发生的消息事件之前进行处理和同步。</p><p><strong>注意</strong> 在单条消息中，同一个用户可能会被提及多次。每次提及都需要被 <strong>分别</strong> 统计。</p><p><strong>示例 1：</strong></p><p>**输入：**numberOfUsers = 2, events = [[&quot;MESSAGE&quot;,&quot;10&quot;,&quot;id1 id0&quot;],[&quot;OFFLINE&quot;,&quot;11&quot;,&quot;0&quot;],[&quot;MESSAGE&quot;,&quot;71&quot;,&quot;HERE&quot;]]</p><p><strong>输出：</strong>[2,2]</p><p><strong>解释：</strong></p><p>最初，所有用户都在线。</p><p>时间戳 10 ，<code>id1</code> 和 <code>id0</code> 被提及，<code>mentions = [1,1]</code></p><p>时间戳 11 ，<code>id0</code> <strong>离线</strong> 。</p><p>时间戳 71 ，<code>id0</code> 再次 <strong>上线</strong> 并且 <code>&quot;HERE&quot;</code> 被提及，<code>mentions = [2,2]</code></p><p><strong>示例 2：</strong></p><p>**输入：**numberOfUsers = 2, events = [[&quot;MESSAGE&quot;,&quot;10&quot;,&quot;id1 id0&quot;],[&quot;OFFLINE&quot;,&quot;11&quot;,&quot;0&quot;],[&quot;MESSAGE&quot;,&quot;12&quot;,&quot;ALL&quot;]]</p><p><strong>输出：</strong>[2,2]</p><p><strong>解释：</strong></p><p>最初，所有用户都在线。</p><p>时间戳 10 ，<code>id1</code> 和 <code>id0</code> 被提及，<code>mentions = [1,1]</code></p><p>时间戳 11 ，<code>id0</code> <strong>离线</strong> 。</p><p>时间戳 12 ，<code>&quot;ALL&quot;</code> 被提及。这种方式将会包括所有离线用户，所以 <code>id0</code> 和 <code>id1</code> 都被提及，<code>mentions = [2,2]</code></p><p><strong>示例 3：</strong></p><p>**输入：**numberOfUsers = 2, events = [[&quot;OFFLINE&quot;,&quot;10&quot;,&quot;0&quot;],[&quot;MESSAGE&quot;,&quot;12&quot;,&quot;HERE&quot;]]</p><p><strong>输出：</strong>[0,1]</p><p><strong>解释：</strong></p><p>最初，所有用户都在线。</p><p>时间戳 10 ，<code>id0</code> <strong>离线</strong> <strong>。</strong></p><p>时间戳 12 ，<code>&quot;HERE&quot;</code> 被提及。由于 <code>id0</code> 仍处于离线状态，其将不会被提及，<code>mentions = [0,1]</code></p><p><strong>提示：</strong></p><ul><li><code>1 &lt;= numberOfUsers &lt;= 100</code></li><li><code>1 &lt;= events.length &lt;= 100</code></li><li><code>events[i].length == 3</code></li><li><code>events[i][0]</code> 的值为 <code>MESSAGE</code> 或 <code>OFFLINE</code> 。</li><li><code>1 &lt;= int(events[i][1]) &lt;= 105</code></li><li>在任意 <code>&quot;MESSAGE&quot;</code> 事件中，以 <code>id&lt;number&gt;</code> 形式提及的用户数目介于 <code>1</code> 和 <code>100</code> 之间。</li><li><code>0 &lt;= &lt;number&gt; &lt;= numberOfUsers - 1</code></li><li>题目保证 <code>OFFLINE</code> 引用的用户 id 在事件发生时处于 <strong>在线</strong> 状态。</li></ul><h1 id="解题思路" tabindex="-1"><a class="header-anchor" href="#解题思路"><span>解题思路</span></a></h1><p>模拟</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">class Solution {</span>
<span class="line">public:</span>
<span class="line">    vector&lt;int&gt; countMentions(int numberOfUsers, vector&lt;vector&lt;string&gt;&gt;&amp; events) {</span>
<span class="line">        // 按照时间戳从小到大排序，时间戳相同的，离线事件排在前面</span>
<span class="line">        ranges::sort(events, {}, [](auto&amp; e) {</span>
<span class="line">            return pair(stoi(e[1]), e[0][2]);</span>
<span class="line">        });</span>
<span class="line"></span>
<span class="line">        vector&lt;int&gt; ans(numberOfUsers);</span>
<span class="line">        vector&lt;int&gt; online_t(numberOfUsers);</span>
<span class="line">        for (auto&amp; e : events) {</span>
<span class="line">            int cur_t = stoi(e[1]); // 当前时间</span>
<span class="line">            string&amp; mention = e[2];</span>
<span class="line">            if (e[0][0] == &#39;O&#39;) { // 离线</span>
<span class="line">                online_t[stoi(mention)] = cur_t + 60; // 下次在线时间</span>
<span class="line">            } else if (mention[0] == &#39;A&#39;) { // @所有人</span>
<span class="line">                for (int&amp; cnt : ans) {</span>
<span class="line">                    cnt++;</span>
<span class="line">                }</span>
<span class="line">            } else if (mention[0] == &#39;H&#39;) { // @所有在线用户</span>
<span class="line">                for (int i = 0; i &lt; numberOfUsers; i++) {</span>
<span class="line">                    if (online_t[i] &lt;= cur_t) { // 在线</span>
<span class="line">                        ans[i]++;</span>
<span class="line">                    }</span>
<span class="line">                }</span>
<span class="line">            } else { // @id</span>
<span class="line">                for (const auto&amp; part : mention | ranges::views::split(&#39; &#39;)) {</span>
<span class="line">                    string s(part.begin() + 2, part.end());</span>
<span class="line">                    ans[stoi(s)]++;</span>
<span class="line">                }</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">        return ans;</span>
<span class="line">    }</span>
<span class="line">};</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复杂度分析</p><ul><li>时间复杂度：O(<em>mn</em>+<em>m</em>log<em>m</em>log<em>U</em>+<em>L</em>)</li><li>空间复杂度：O(n)</li></ul>`,37)]))}const c=n(l,[["render",o]]),r=JSON.parse('{"path":"/leetcode/20251212.html","title":"3433. 统计用户被提及情况","lang":"zh-CN","frontmatter":{"date":"2025-12-12T00:00:00.000Z","category":["LeetCode每日一题"],"tag":["数组","数学","排序"]},"headers":[],"git":{"updatedTime":1766800992000,"contributors":[{"name":"zhengqianhe0","username":"zhengqianhe0","email":"1821984431@qq.com","commits":1,"url":"https://github.com/zhengqianhe0"}],"changelog":[{"hash":"f7994bdc2b7d79487139c25b9441948e02916a3e","time":1766800992000,"email":"1821984431@qq.com","author":"zhengqianhe0","message":"mryt"}]},"filePathRelative":"leetcode/20251212.md","excerpt":"\\n<p>给你一个整数 <code>numberOfUsers</code> 表示用户总数，另有一个大小为 <code>n x 3</code> 的数组 <code>events</code> 。</p>\\n<p>每个 <code>events[i]</code> 都属于下述两种类型之一：</p>\\n<ol>\\n<li>\\n<p>消息事件（Message Event）：</p>\\n<div class=\\"language-text line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"text\\"><pre><code><span class=\\"line\\">[\\"MESSAGE\\", \\"timestampi\\", \\"mentions_stringi\\"]</span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div><ul>\\n<li>\\n<p>事件表示在 <code>timestampi</code> 时，一组用户被消息提及。</p>\\n</li>\\n<li>\\n<div class=\\"language-text line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"text\\"><pre><code><span class=\\"line\\">mentions_stringi</span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div><p>字符串包含下述标识符之一：</p>\\n<ul>\\n<li><code>id&lt;number&gt;</code>：其中 <code>&lt;number&gt;</code> 是一个区间 <code>[0,numberOfUsers - 1]</code> 内的整数。可以用单个空格分隔 <strong>多个</strong> id ，并且 id 可能重复。此外，这种形式可以提及离线用户。</li>\\n<li><code>ALL</code>：提及 <strong>所有</strong> 用户。</li>\\n<li><code>HERE</code>：提及所有 <strong>在线</strong> 用户。</li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n<li>\\n<p>离线事件（Offline Event）：</p>\\n<div class=\\"language-text line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"text\\"><pre><code><span class=\\"line\\">[\\"OFFLINE\\", \\"timestampi\\", \\"idi\\"]</span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div><ul>\\n<li>事件表示用户 <code>idi</code> 在 <code>timestampi</code> 时变为离线状态 <strong>60 个单位时间</strong>。用户会在 <code>timestampi + 60</code> 时自动再次上线。</li>\\n</ul>\\n</li>\\n</ol>"}');export{c as comp,r as data};
