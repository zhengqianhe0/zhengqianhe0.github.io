---
date: 2025-09-12
category:
  - LeetCode每日一题
tag:
  - 字符串
  - 数学
  - 脑筋急转弯
---

# [3227. 字符串元音游戏](https://leetcode.cn/problems/vowels-game-in-a-string/)

小红和小明在玩一个字符串元音游戏。

给你一个字符串 `s`，小红和小明将轮流参与游戏，小红 **先** 开始：

- 在小红的回合，她必须移除 `s` 中包含 **奇数** 个元音的任意 **非空** 子字符串。
- 在小明的回合，他必须移除 `s` 中包含 **偶数** 个元音的任意 **非空** 子字符串。

第一个无法在其回合内进行移除操作的玩家输掉游戏。假设小红和小明都采取 **最优策略** 。

如果小红赢得游戏，返回 `true`，否则返回 `false`。

英文元音字母包括：`a`, `e`, `i`, `o`, 和 `u`。

 

**示例 1：**

**输入：** s = "leetcoder"

**输出：** true

**解释：**
小红可以执行如下移除操作来赢得游戏：

- 小红先手，她可以移除加下划线的子字符串 `s = "**leetco**der"`，其中包含 3 个元音。结果字符串为 `s = "der"`。
- 小明接着，他可以移除加下划线的子字符串 `s = "**d**er"`，其中包含 0 个元音。结果字符串为 `s = "er"`。
- 小红再次操作，她可以移除整个字符串 `s = "**er**"`，其中包含 1 个元音。
- 又轮到小明，由于字符串为空，无法执行移除操作，因此小红赢得游戏。

**示例 2：**

**输入：** s = "bbcd"

**输出：** false

**解释：**
小红在她的第一回合无法执行移除操作，因此小红输掉了游戏。

 

**提示：**

- `1 <= s.length <= 105`
- `s` 仅由小写英文字母组成。

# 解题思路

分类讨论：

如果 s 不包含任何元音，小红输。
如果 s 包含奇数个元音，小红可以直接把整个 s 移除，小红赢。
如果 s 包含正偶数个元音，由于偶数减奇数等于奇数，小红移除任意包含奇数个元音的子串后，剩余元音个数仍然为奇数。由于奇数减偶数还是奇数，所以无论小明怎么操作，仍然会剩下奇数个元音，此时小红可以直接把整个 s 移除，小红赢。


所以只要 s 包含至少一个元音，就返回 true，否则返回 false。

```
class Solution {
public:
    bool doesAliceWin(string s) {
        return ranges::any_of(s, [](char c) {
            return c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u';
        });
    }
};
```

C++20引入的ranges库中any_of的用法：

1. **第一个参数（范围对象）**
   可以是任何**符合范围概念（Range）** 的对象，包括：

   - 标准容器：`std::string`、`std::vector`、`std::array`、`std::list` 等
   - 原生数组：如 `int arr[] = {1,2,3}`
   - 其他满足范围要求的自定义类型（需实现 `begin()` 和 `end()` 迭代器）

   本质上，只要对象能通过 `begin()` 和 `end()` 获取迭代器，就能作为 `ranges::any_of` 的第一个参数。例如，`std::string` 会被视作字符的范围，`std::vector<int>` 会被视作整数的范围。

2. **第二个参数（谓词函数）**
   是一个**谓词（Predicate）**，即：

   - 可以是函数指针、函数对象（ functor ）或 lambda 表达式
   - 接收范围中的单个元素作为参数（类型需与范围元素类型匹配）
   - 返回 `bool` 类型结果，表示该元素是否满足条件

   `ranges::any_of` 的逻辑是：**只要范围内有至少一个元素使谓词返回 `true`，整体就返回 `true`；否则返回 `false`**。

复杂度分析

- 时间复杂度：O(n)
- 空间复杂度：O(1)
