---
date: 2025-12-02
category:
  - LeetCode每日一题
tag:
  - 几何
  - 数组
  - 数学
  - 哈希表
---

# [3623. 统计梯形的数目 I](https://leetcode.cn/problems/count-number-of-trapezoids-i/)

给你一个二维整数数组 `points`，其中 `points[i] = [xi, yi]` 表示第 `i` 个点在笛卡尔平面上的坐标。

**水平梯形** 是一种凸四边形，具有 **至少一对** 水平边（即平行于 x 轴的边）。两条直线平行当且仅当它们的斜率相同。

返回可以从 `points` 中任意选择四个不同点组成的 **水平梯形** 数量。

由于答案可能非常大，请返回结果对 `109 + 7` 取余数后的值。

 

**示例 1：**

**输入：** points = [[1,0],[2,0],[3,0],[2,2],[3,2]]

**输出：** 3

**解释：**

![img](https://assets.leetcode.com/uploads/2025/05/01/desmos-graph-6.png)![img](https://assets.leetcode.com/uploads/2025/05/01/desmos-graph-7.png)![img](https://assets.leetcode.com/uploads/2025/05/01/desmos-graph-8.png)

有三种不同方式选择四个点组成一个水平梯形：

- 使用点 `[1,0]`、`[2,0]`、`[3,2]` 和 `[2,2]`。
- 使用点 `[2,0]`、`[3,0]`、`[3,2]` 和 `[2,2]`。
- 使用点 `[1,0]`、`[3,0]`、`[3,2]` 和 `[2,2]`。

**示例 2：**

**输入：** points = [[0,0],[1,0],[0,1],[2,1]]

**输出：** 1

**解释：**

![img](https://assets.leetcode.com/uploads/2025/04/29/desmos-graph-5.png)

只有一种方式可以组成一个水平梯形。

 

**提示：**

- `4 <= points.length <= 105`
- `–108 <= xi, yi <= 108`
- 所有点两两不同。

 



# 解题思路

先统计每一行有多少个点，两两组合成边。

用s记录当前处理过的边。遍历到一条新边时，和之前所有处理过的边相乘匹配，加入ans。同时这条边完成处理，添入s

1LL用于在乘法的第一步将结果转为long long ，避免后面计算时溢出

```
class Solution {
public:
    int countTrapezoids(vector<vector<int>>& points) {
        const int MOD = 1'000'000'007;
        unordered_map<int, int> cnt;
        for (auto& p : points) {
            cnt[p[1]]++; // 统计每一行（水平线）有多少个点
        }

        long long ans = 0, s = 0;
        for (auto& [b, c] : cnt) {
            long long k = 1LL * c * (c - 1) / 2;
            ans += s * k;
            s += k;
        }
        return ans % MOD;
    }
};

```

复杂度分析


- 时间复杂度：O(n)
- 空间复杂度：O(n)

